{# showcase_risk.html — Revision Risk Meter #}
{# Receives: showcase.revision_risk #}
{% set risk = showcase.revision_risk %}
<div class="showcase-risk glass-card"
     data-track="showcase-view"
     data-showcase="risk"
     style="padding: var(--space-6);">
  <style>
    .risk-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: var(--space-4);
      margin-bottom: var(--space-5);
      flex-wrap: wrap;
    }
    .risk-title {
      font-family: var(--sans);
      font-size: var(--text-lg);
      font-weight: 400;
      color: var(--text-primary);
      margin: 0;
    }
    .risk-severity-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-2);
      font-family: var(--mono);
      font-size: 10px;
      font-weight: 400;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--signal-red);
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.25);
      padding: 3px 10px;
      border-radius: var(--radius-sm);
      white-space: nowrap;
      flex-shrink: 0;
    }
    .risk-gauge-section {
      margin-bottom: var(--space-5);
    }
    .risk-pct-display {
      display: flex;
      align-items: baseline;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
    }
    .risk-pct-value {
      font-family: var(--mono);
      font-size: clamp(28px, 5vw, 44px);
      font-weight: 300;
      color: var(--signal-red);
      line-height: 1;
    }
    .risk-pct-label {
      font-family: var(--sans);
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }
    .risk-gauge-track {
      height: 8px;
      background: var(--glass);
      border-radius: var(--radius-full);
      overflow: hidden;
      margin-bottom: var(--space-2);
    }
    .risk-gauge-fill {
      height: 100%;
      border-radius: var(--radius-full);
      background: linear-gradient(90deg, var(--dot-amber), var(--dot-red));
      transition: width 1.4s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .risk-gauge-label {
      display: flex;
      justify-content: space-between;
      font-family: var(--mono);
      font-size: 9px;
      color: var(--text-tertiary);
    }
    .risk-sample {
      font-family: var(--sans);
      font-size: var(--text-xs);
      color: var(--text-secondary);
      margin-bottom: var(--space-5);
    }
    .risk-triggers-label {
      font-family: var(--mono);
      font-size: 10px;
      font-weight: 400;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-secondary);
      margin-bottom: var(--space-3);
    }
    .risk-triggers-list {
      list-style: none;
      padding: 0;
      margin: 0 0 var(--space-5) 0;
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }
    .risk-trigger-item {
      display: flex;
      gap: var(--space-3);
      font-family: var(--sans);
      font-size: var(--text-sm);
      color: var(--text-secondary);
      line-height: 1.5;
    }
    .risk-trigger-num {
      font-family: var(--mono);
      font-size: var(--text-xs);
      color: var(--signal-amber);
      flex-shrink: 0;
      width: 16px;
      margin-top: 2px;
    }
    .risk-impacts {
      display: flex;
      gap: var(--space-4);
      margin-bottom: var(--space-5);
      flex-wrap: wrap;
    }
    .risk-impact-item {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-sm);
      padding: var(--space-3) var(--space-4);
      flex: 1;
      min-width: 120px;
    }
    .risk-impact-value {
      font-family: var(--mono);
      font-size: var(--text-lg);
      font-weight: 300;
      color: var(--signal-amber);
    }
    .risk-impact-label {
      font-family: var(--sans);
      font-size: var(--text-xs);
      color: var(--text-secondary);
      margin-top: var(--space-1);
    }
    .risk-cta-row {
      padding-top: var(--space-4);
      border-top: 1px solid var(--glass-border);
      display: flex;
      justify-content: flex-end;
    }
  </style>

  <div class="risk-header">
    <div>
      <h3 class="risk-title">Revision Risk Meter</h3>
    </div>
    <span class="risk-severity-badge">
      <span class="status-dot status-dot--red"></span>
      {{ risk.severity }}
    </span>
  </div>

  <div class="risk-gauge-section">
    <div class="risk-pct-display">
      <span class="risk-pct-value">{{ risk.risk_pct }}%</span>
      <span class="risk-pct-label">probability of plan corrections</span>
    </div>
    <div class="risk-gauge-track">
      <div class="risk-gauge-fill" style="width: {{ risk.risk_pct }}%;"></div>
    </div>
    <div class="risk-gauge-label">
      <span>0%</span>
      <span>50%</span>
      <span>100%</span>
    </div>
  </div>

  <p class="risk-sample">Based on {{ "{:,}".format(risk.sample_size) }} {{ risk.sample_description }}</p>

  <div class="risk-triggers-label">Top correction triggers</div>
  <ol class="risk-triggers-list">
    {% for trigger in risk.top_triggers %}
    <li class="risk-trigger-item">
      <span class="risk-trigger-num">{{ loop.index }}.</span>
      <span>{{ trigger }}</span>
    </li>
    {% endfor %}
  </ol>

  <div class="risk-impacts">
    <div class="risk-impact-item">
      <div class="risk-impact-value">+{{ risk.timeline_impact_days }} days</div>
      <div class="risk-impact-label">Average timeline impact</div>
    </div>
    <div class="risk-impact-item">
      <div class="risk-impact-value">{{ risk.budget_recommended }}</div>
      <div class="risk-impact-label">Recommended budget</div>
    </div>
  </div>

  <div class="risk-cta-row">
    <a href="/tools/revision-risk?demo={{ risk.demo }}"
       class="ghost-cta"
       data-track="showcase-click"
       data-showcase="risk">Try it yourself →</a>
  </div>
</div>
