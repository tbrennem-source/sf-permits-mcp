<div class="tag-editor" id="tag-editor-{{ watch.watch_id }}">
    <div class="tag-display">
        {% for tag in watch.tags.split(',') if tag.strip() %}
        <span class="tag-pill">{{ tag.strip() }}</span>
        {% endfor %}
        <button type="button" class="tag-edit-toggle"
                style="background: none; border: none; color: var(--text-muted); cursor: pointer;
                       font-size: 0.8rem; padding: 2px 6px; border-radius: 4px; vertical-align: middle;"
                onmouseover="this.style.color='var(--accent)'; this.style.background='var(--surface-2)';"
                onmouseout="this.style.color='var(--text-muted)'; this.style.background='none';"
                onclick="var f=this.parentElement.nextElementSibling; f.style.display='inline-flex'; this.style.display='none';"
                title="Edit tags">&#9998;</button>
    </div>
    <form hx-post="/watch/tags" hx-target="#tag-editor-{{ watch.watch_id }}" hx-swap="outerHTML"
          style="display: none; gap: 4px; align-items: center;">
        <input type="hidden" name="watch_id" value="{{ watch.watch_id }}">
        <input type="text" name="tags" value="{{ watch.tags }}"
               placeholder="e.g. google, residential"
               style="background: var(--surface-2); border: 1px solid var(--border); color: var(--text);
                      padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; width: 200px;">
        <button type="submit" class="badge badge-btn" style="font-size: 0.7rem;">Save</button>
        <button type="button"
                style="background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 0.8rem; padding: 4px;"
                onclick="var d=this.closest('.tag-editor').querySelector('.tag-edit-toggle'); d.style.display='inline'; this.closest('form').style.display='none';">Cancel</button>
    </form>
</div>
