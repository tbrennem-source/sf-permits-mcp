{# Single prep checklist item â€” used by HTMX PATCH response #}
<div class="prep-item" id="prep-item-{{ item.item_id }}"
     data-status="{{ item.status }}">
    <div class="prep-item-header">
        <span class="prep-item-name">{{ item.document_name }}</span>
        {% if item.source == 'predicted' %}
        <span class="prep-source-badge">AI predicted</span>
        {% else %}
        <span class="prep-source-badge prep-source-manual">manual</span>
        {% endif %}
    </div>
    <div class="prep-status-group">
        {% for st in ['required', 'submitted', 'verified', 'waived', 'n_a'] %}
        <label class="prep-radio {% if item.status == st %}prep-radio-active{% endif %}">
            <input type="radio" name="status-{{ item.item_id }}" value="{{ st }}"
                   {% if item.status == st %}checked{% endif %}
                   hx-patch="/api/prep/item/{{ item.item_id }}"
                   hx-vals='{"status": "{{ st }}"}'
                   hx-target="#prep-item-{{ item.item_id }}"
                   hx-swap="outerHTML"
                   hx-headers='{"Content-Type": "application/json"}'
            >
            <span class="prep-radio-label prep-radio-{{ st }}">
                {% if st == 'required' %}Required
                {% elif st == 'submitted' %}Submitted
                {% elif st == 'verified' %}Verified
                {% elif st == 'waived' %}Waived
                {% elif st == 'n_a' %}N/A
                {% endif %}
            </span>
        </label>
        {% endfor %}
    </div>
</div>
