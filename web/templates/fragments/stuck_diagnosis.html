{% if diagnosis %}
<div style="font-family:var(--sans,'IBM Plex Sans',sans-serif);">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
        <span style="font-size:0.85rem;font-weight:500;color:var(--signal-red,#f87171);">
            Severity: {{ diagnosis.severity | default('unknown') | title }}
        </span>
        {% if diagnosis.severity_score is defined and diagnosis.severity_score is not none %}
        <span style="font-size:0.75rem;color:var(--text-secondary,rgba(255,255,255,0.55));">
            ({{ diagnosis.severity_score }}/100)
        </span>
        {% endif %}
    </div>

    {% if diagnosis.stuck_stations %}
    <div style="margin-bottom:10px;">
        {% for station in diagnosis.stuck_stations %}
        <div style="font-size:0.85rem;margin-bottom:4px;">
            <span style="font-family:var(--mono,'JetBrains Mono',monospace);color:var(--text-primary,rgba(255,255,255,0.92));">{{ station.station }}</span>
            <span style="color:var(--text-secondary,rgba(255,255,255,0.55));">:
                {{ station.days }} days
                {% if station.baseline_p50 is defined and station.baseline_p50 is not none %}
                (baseline: {{ station.baseline_p50 }}d)
                {% endif %}
            </span>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if diagnosis.interventions %}
    <div style="margin-top:8px;padding:10px 12px;background:var(--glass,rgba(255,255,255,0.04));border:1px solid var(--glass-border,rgba(255,255,255,0.06));border-radius:6px;">
        <div style="font-size:0.8rem;color:var(--text-secondary,rgba(255,255,255,0.55));margin-bottom:4px;">Next step</div>
        <div style="font-size:0.875rem;color:var(--text-primary,rgba(255,255,255,0.92));">
            {{ diagnosis.interventions[0].action }}
        </div>
    </div>
    {% endif %}
</div>
{% else %}
<div style="font-size:0.875rem;color:var(--text-secondary,rgba(255,255,255,0.55));">
    No stuck diagnosis available
</div>
{% endif %}
