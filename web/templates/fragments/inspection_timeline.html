{% if timeline %}
<div class="inspection-timeline" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border);">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
        <span style="font-size: 0.8rem; font-weight: 600; color: var(--accent);">Inspection Progress</span>
        <span style="font-size: 0.75rem; color: var(--text-muted);">{{ timeline.progress_pct }}% &middot; {{ timeline.total_inspections }} inspections</span>
    </div>

    <!-- Progress bar -->
    <div style="background: var(--surface-2); border-radius: 4px; height: 6px; margin-bottom: 10px; overflow: hidden;">
        <div style="background: {{ 'var(--success)' if timeline.progress_pct >= 90 else 'var(--accent)' if timeline.progress_pct >= 50 else 'var(--warning)' }}; height: 100%; width: {{ timeline.progress_pct }}%; border-radius: 4px; transition: width 0.3s;"></div>
    </div>

    <!-- Sequence steps -->
    <div style="display: flex; flex-wrap: wrap; gap: 4px; font-size: 0.7rem;">
        {% for step in timeline.sequence %}
        {% if step in timeline.completed_types %}
        <span style="color: var(--success);" title="Passed">&#10003; {{ step | truncate(12, True, '..') }}</span>
        {% elif step == timeline.suggested_next %}
        <span style="color: var(--accent); font-weight: 600;" title="Suggested next">&#9654; {{ step | truncate(12, True, '..') }}</span>
        {% else %}
        <span style="color: var(--text-muted);">&#9675; {{ step | truncate(12, True, '..') }}</span>
        {% endif %}
        {% if not loop.last %}<span style="color: var(--border);">&rarr;</span>{% endif %}
        {% endfor %}
    </div>

    {% if timeline.suggested_next %}
    <div style="margin-top: 8px; font-size: 0.8rem; color: var(--accent);">
        Next: <strong>{{ timeline.suggested_next }}</strong>
    </div>
    {% endif %}

    {% if timeline.failed_needing_reinspection %}
    <div style="margin-top: 8px;">
        {% for fail in timeline.failed_needing_reinspection %}
        <div style="font-size: 0.75rem; color: var(--error);">
            &#10007; {{ fail.type }} failed ({{ fail.date }}) â€” needs re-inspection
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endif %}
