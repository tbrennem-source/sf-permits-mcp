{% set TAB_META = {
    "predict": {"label": "Permits", "panel": "panel-predict"},
    "fees": {"label": "Fees", "panel": "panel-fees"},
    "timeline": {"label": "Timeline", "panel": "panel-timeline"},
    "docs": {"label": "Documents", "panel": "panel-docs"},
    "risk": {"label": "Revision Risk", "panel": "panel-risk"},
    "team": {"label": "Your Team", "panel": "panel-team"},
} %}

{% set order = section_order or ["predict", "timeline", "fees", "docs", "risk"] %}
{% if has_team %}
    {% set order = order + ["team"] %}
{% endif %}

<div class="results-tabs">
{% for key in order %}
    {% if results.get(key) %}
    <button class="tab{% if loop.first %} active{% endif %}" data-panel="{{ TAB_META[key].panel }}">{{ TAB_META[key].label }}</button>
    {% endif %}
{% endfor %}
</div>

{% for key in order %}
{% if results.get(key) %}
<div id="{{ TAB_META[key].panel }}" class="tab-panel{% if loop.first %} active{% endif %}">
    <div class="result-card">
        {{ results[key] | safe }}
    </div>
</div>
{% endif %}
{% endfor %}
